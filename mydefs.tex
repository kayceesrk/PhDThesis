%
%  mydefs.tex  2007-03-19  Mark Senn  http://www.ecn.purdue.edu/~mark
%
%  Command definitions that can be used in all documents that have
%      \input{mydefs}
%

% CHANGE NEXT 3 LINES?
% Define \be and \ee to start and end the equation environment.
\newcommand{\be}{\begin{equation}}
\newcommand{\ee}{\end{equation}}

% CHANGE NEXT 12 LINES?
% Define \Repeat so, for example,
%     \Repeat{whatever}{10}
% is the same as typing whatever 10 times.
\newcount{\myi}
\newcommand{\Repeat}[2]{%
    \myi=0
    \loop
        \ifnum\myi<#2
        #1
        \advance\myi by 1
    \repeat
}

% CHANGE NEXT 3 LINES?
% Make "\Sum ab" or "\Sum{a}{b}" do "\sum_{a}^{b}".
% This can only be used when in math mode.
\newcommand\Sum[2]{\sum_{#1}^{#2}}

% CHANGE NEXT 4 LINES?
% Make "\xn" do "$x_n$".
% Because this definition contains the "$" to go into math mode
% this definition must be used when not in math mode.
\newcommand{\xn}{$x_n$}

% CHANGE NEXT 5 LINES?
% Since \xn is already defined we must use \renewcommand to redefine it.
% Normally you would not have the above definition for \xn in this file
% if you were just going to override it later.
% The \ensuremath goes into math mode if not already in math mode.
\renewcommand{\xn}{\ensuremath{x_n}}

\newcommand{\MM}{\textsc{MultiMLton}\xspace}
\newcommand{\quelea}{\textsc{Quelea}\xspace}
\newcommand{\MMSCC}{\textsc{Aneris}\xspace}
\newcommand{\rxcml}{\ftextrecipe$^{\mbox{\tiny\sc CML}}$\xspace}
\newcommand{\acml}{ACML\xspace}

\lstset{ %
language=ML, % choose the language of the code
basicstyle=\footnotesize\ttfamily,       % the size of the fonts that are used for the code
keywordstyle=\color{Bittersweet},
%numbers=left,                   % where to put the line-numbers
%numberstyle=\tiny,      % the size of the fonts that are used for the line-numbers
%stepnumber=1,                   % the step between two line-numbers. If it is 1 each line will be numbered
%numbersep=5pt,                  % how far the line-numbers are from the code
%backgroundcolor=\color{white},  % choose the background color. You must add \usepackage{color}
showspaces=false,               % show spaces adding particular underscores
showstringspaces=false,         % underline spaces within strings
showtabs=false,                 % show tabs within strings adding particular underscores
frame=single,                   % adds a frame around the code
tabsize=2,                      % sets default tabsize to 2 spaces
captionpos=b,                   % sets the caption-position to bottom
breaklines=true,                % sets automatic line breaking
breakatwhitespace=false,        % sets if automatic breaks should only happen at whitespace
commentstyle=\itshape\color{MidnightBlue},
%escapeinside={\%*}{*)},         % if you want to add a comment within your code
}

\font\ninett=cmtt8

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% General
\font\nine=cmr9

\font\ninerm=cmr9
\font\ninebf=cmbx9
\font\nineit=cmti9
\font\ninesl=cmsl9
\font\ninett=cmtt9
\font\ninemi=cmmi9  \skewchar\ninemi='177
\font\ninesy=cmsy9  \skewchar\ninesy='60
\font\nineex=cmex10

%%%%%%%%%%%%%%%%%%%%%%%
%% Math Fonts

\font\mathninerm=cmr9
\font\mathninei=cmmi9
\font\mathninesy=cmsy9


\def\ninepoint{\def\rm{\fam0\ninerm}%
\textfont0=\mathninerm\scriptfont0=\mathsevenrm\scriptscriptfont0=\mathfiverm%
\textfont1=\mathninei\scriptfont1=\mathseveni\scriptscriptfont1=\mathfivei%
\textfont2=\mathninesy\scriptfont2=\mathsevensy\scriptscriptfont2=\mathfivesy%
\textfont3=\tenex
\let\sc=\sevenrm
 \def\it{\fam\itfam\nineit}%
  \textfont\itfam=\nineit
  \def\bf{\fam\bffam\ninebf}%
  \textfont\bffam=\ninebf
  \def\tt{\fam\ttfam\ninett}%
  \textfont\ttfam=\ninett
  \setbox\strutbox=\hbox{\vrule height9pt depth4pt width0pt}%
  \baselineskip=11pt\rm}


\newenvironment{boxit}{\vbox\bgroup\hrule\hbox\bgroup\vrule\kern3pt
    \vbox\bgroup\kern3pt\advance\hsize by -6.8pt\relax}{\par\kern3pt\egroup\kern3pt\vrule\egroup\hrule\egroup}

\font\matheightrm=cmr8
\font\matheightbf=cmbx8
\font\matheighti=cmmi8
\font\matheightsy=cmsy8
\font\eightit=cmti8
\font\eighttt=cmtt8



\def\eightpoint{%
\textfont0=\matheightrm%
\scriptfont0=\mathsixrm\scriptscriptfont0=\mathfiverm
\textfont1=\matheighti\scriptfont1=\mathsixi\scriptscriptfont1=\mathfivei%
\textfont2=\matheightsy\scriptfont2=\mathsixsy\scriptscriptfont2=\mathfivesy%
\def\rm{\fam0\matheightrm}%
\def\it{\fam\itfam\eightit}%
\textfont\itfam=\eightit%
  \def\bf{\fam\bffam\matheightbf}%
  \textfont\bffam=\matheightbf%
  \def\tt{\fam\ttfam\eighttt}%
  \textfont\ttfam=\eighttt%
  \setbox\strutbox=\hbox{\vrule height7pt depth2pt width0pt}%
 \baselineskip=9pt\rm}


\lstdefinestyle{numbers}
{numbers=left, stepnumber=1, numberstyle=\tiny, numbersep=10pt}

\lstset{
   basicstyle=\small\tt, % print whole listing small
   language = ML,
   numberstyle=\small,
   style = numbers,
   keywordstyle=\bf,
   %morekeywords={spawn,send,recv,map,reify,attach,inflate,prepare,spawnParasite,sync},
   showstringspaces=false} % no special string spaces

\newfam\smallttfam


\newcommand{\codecf}{\ninett\fam\smallttfam}

\newcount\typett

\def\startdisplay#1
  {\bgroup\catcode`\`=\active\obeyspaces\obeylines
     \def\i##1{{\it ##1}}
     \def\c##1{{\cf ##1}}
     \setlength{\topsep}{0in}
     \setlength{\partopsep}{0in}
     \setlength{\itemsep}{0in}
     \setlength{\parsep}{0in}
     \setlength{\leftmargin}{6.5em}
     \setlength{\rightmargin}{0in}
     \setlength{\itemindent}{0in}
     \baselineskip=9pt
     \codecf\tt\small
     \parskip=0pt plus 1pt\medskip\ifnum\typett>0 \codecf\else\it\fi\penalty7000}


\global\def\enddisp{\egroup\catcode`\^^M=5}
 {\obeyspaces\global\let \ }

\newenvironment{code}{\typett=1\startdisplay}{\enddisp}
\newenvironment{display}{\typett=0\startdisplay}{\enddisp}

\newcommand{\parConcat}{~\triangleleft~}
\renewcommand{\k}[1]{\mathtt{#1}}
\newcommand{\I}[1]{\mathit{#1}}
\newcommand{\control}[4]{\langle #1, #2, #3, #4\rangle}
\newcommand{\cont}[3]{\langle #1:#2 \parConcat #3 \rangle}
\newcommand{\kbar}[1]{\overline{\k{#1}}}
\newcommand{\lframe}[2]{\mathit{#1}\lceil #2 \rceil}
\newcommand{\lam}[2]{\lambda\,#1.#2}
\newcommand{\ThreadMap}{{\cal T}}
\newcommand{\ChannelMap}{{\cal C}}
%%\newcommand{\R}{{\cal R}}
\newcommand{\threads}[2]{\ThreadMap[#1 \mapsto #2]}
\newcommand{\channels}[2]{\ChannelMap[#1 \mapsto #2]}
\newcommand{\async}[1]{\k{spawnParasite}(#1)}
\newcommand{\infl}[1]{\k{inflate}(#1)}
\newcommand{\reif}[1]{\k{reify}(#1)}

\setlength{\parindent}{8pt}
\setlength{\parskip}{\smallskipamount}

\newenvironment{nop}{}{}
% Math mode
\newenvironment{ldisplaymath}{
\par\noindent\begin{nop}\large\begin{displaymath}}{
\end{displaymath}\end{nop}\ignorespacesafterend}
\newenvironment{ndisplaymath}{
\par\noindent\begin{nop}\normalsize\begin{displaymath}}{
\end{displaymath}\end{nop}\ignorespacesafterend}
\newenvironment{sdisplaymath}{
\par\noindent\begin{nop}\small\begin{displaymath}}{
\end{displaymath}\end{nop}\ignorespacesafterend}
\newenvironment{fdisplaymath}{
\par\noindent\begin{nop}\footnotesize\begin{displaymath}}{
\end{displaymath}\end{nop}\ignorespacesafterend}
\newenvironment{lmathpar}{
\begin{nop}\large\begin{mathpar}}{
\end{mathpar}\end{nop}\ignorespacesafterend}
\newenvironment{nmathpar}{
\begin{nop}\normalsize\begin{mathpar}}{
\end{mathpar}\end{nop}\ignorespacesafterend}
\newenvironment{smathpar}{
\begin{nop}\small\begin{mathpar}}{
\end{mathpar}\end{nop}\ignorespacesafterend}
\newenvironment{fmathpar}{
\begin{nop}\footnotesize\begin{mathpar}}{
\end{mathpar}\end{nop}\ignorespacesafterend}
\newenvironment{alignS}{
\par\noindent\begin{nop}\begin{align}}{
\end{align}\end{nop}\ignorespacesafterend}
\newenvironment{salignS}{
\par\noindent\begin{nop}\small\begin{align}}{
\end{align}\end{nop}\ignorespacesafterend}
\newenvironment{falignS}{
\par\noindent\begin{nop}\footnotesize\begin{align*}}{
\end{align}\end{nop}\ignorespacesafterend}
\newcommand{\mfbox}[1]{\fbox{${#1}$}}


